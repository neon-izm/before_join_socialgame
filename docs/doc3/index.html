<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-doc3">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">2章:ソーシャルゲーム向けのUnityクライアント作成 | ソーシャルゲームのクライアントエンジニア入門以前</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://neon-izm.github.io/before_join_socialgame/docs/doc3"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="2章:ソーシャルゲーム向けのUnityクライアント作成 | ソーシャルゲームのクライアントエンジニア入門以前"><meta data-rh="true" name="description" content="Unityクライアントを作る時も、普通のゲーム同様気を付けることと、ソーシャルゲーム特有の気を付けることがあります。"><meta data-rh="true" property="og:description" content="Unityクライアントを作る時も、普通のゲーム同様気を付けることと、ソーシャルゲーム特有の気を付けることがあります。"><link data-rh="true" rel="icon" href="/before_join_socialgame/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://neon-izm.github.io/before_join_socialgame/docs/doc3"><link data-rh="true" rel="alternate" href="https://neon-izm.github.io/before_join_socialgame/docs/doc3" hreflang="en"><link data-rh="true" rel="alternate" href="https://neon-izm.github.io/before_join_socialgame/docs/doc3" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/before_join_socialgame/blog/rss.xml" title="ソーシャルゲームのクライアントエンジニア入門以前 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/before_join_socialgame/blog/atom.xml" title="ソーシャルゲームのクライアントエンジニア入門以前 Atom Feed"><link rel="stylesheet" href="/before_join_socialgame/assets/css/styles.3b4a689e.css">
<link rel="preload" href="/before_join_socialgame/assets/js/runtime~main.99a3b35b.js" as="script">
<link rel="preload" href="/before_join_socialgame/assets/js/main.ed5ee3c9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/before_join_socialgame/"><div class="navbar__logo"><img src="/before_join_socialgame/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/before_join_socialgame/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Site Top</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/before_join_socialgame/docs/">ソーシャルゲームのクライアントエンジニア入門以前</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/before_join_socialgame/docs/">はじめに</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/before_join_socialgame/docs/doc2">1章:サーバサイドと仲良くなろう</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/before_join_socialgame/docs/doc3">2章:ソーシャルゲーム向けのUnityクライアント作成</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/before_join_socialgame/docs/doc4">3章:運用を見据えて作っておこう</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/before_join_socialgame/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">ソーシャルゲームのクライアントエンジニア入門以前</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">2章:ソーシャルゲーム向けのUnityクライアント作成</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>2章:ソーシャルゲーム向けのUnityクライアント作成</h1></header><p>Unityクライアントを作る時も、普通のゲーム同様気を付けることと、ソーシャルゲーム特有の気を付けることがあります。</p><p>特に後者を気にして書いていますが、既に知っている場合は読み飛ばして大丈夫です。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="チュートリアルを作ろう">チュートリアルを作ろう<a href="#チュートリアルを作ろう" class="hash-link" aria-label="Direct link to チュートリアルを作ろう" title="Direct link to チュートリアルを作ろう">​</a></h2><p><strong>一言で言うとどんなもの？</strong></p><p>ユーザが操作説明を覚えるための専用シーン。かっこいいオープニングムービーを流したりもします。</p><p>と言うのが本来の流れですが、 <strong>最近はAppStore審査で、ゲーム開始後すぐにアセットバンドルなどのデータダウンロードさせるゲームはリジェクトされます。</strong></p><p>なので、チュートリアルだけシーンを分けて、アセットバンドルダウンロード無しでチュートリアルまでは遊べるように考慮しておく事が必須です。</p><p><strong>これの理解や実装が不完全だと何が起きるの？</strong></p><ul><li>開発終盤に地獄を見ます</li><li>ユーザの初期離脱率がすごいことになります</li></ul><p><strong>詳しく知りたい人は、この辺の単語でググってほしい</strong></p><ul><li>情報求む</li><li>毎回死にそうになってます</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="インゲームを作ろう">インゲームを作ろう<a href="#インゲームを作ろう" class="hash-link" aria-label="Direct link to インゲームを作ろう" title="Direct link to インゲームを作ろう">​</a></h2><p>例えばリズムゲームならリズムゲームを遊ぶ部分、パズルゲームならパズルをする部分、などのインゲームを作る場合も、様々なコツがあります。</p><p>少し古い記事ですがこちらを参照しておくと（あなたがアウトゲーム担当であったとしても）得るものがあると思います。</p><p>スマホ向けゲームアプリにおける基本的なBattle(インゲーム)設計
<a href="https://qiita.com/JGS_Developer/items/34b27cc0a6ceff85bb84" target="_blank" rel="noopener noreferrer">https://qiita.com/JGS_Developer/items/34b27cc0a6ceff85bb84</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="アウトゲームを作ろう">アウトゲームを作ろう<a href="#アウトゲームを作ろう" class="hash-link" aria-label="Direct link to アウトゲームを作ろう" title="Direct link to アウトゲームを作ろう">​</a></h2><p><strong>一言で言うとどんなもの？</strong></p><p>インゲーム以外の部分を指します。ショップ、マイページ、プロフィール、クエスト、ガチャ、合成、etc…</p><p>つまり、ソーシャルゲームはメチャクチャにアウトゲーム領域が広いです。
その部分は <strong>ゲームの世界観に合わせつつ、山ほどある画面UIを量産</strong> する必要があります。</p><p><strong>これの理解や実装が不完全だと何が起きるの？</strong></p><ul><li>画面量産でプレハブコンフリクトして死ぬ</li><li>タップ連打でバグる</li><li>連続画面遷移でバグる</li></ul><p><strong>詳しく知りたい人は、この辺の単語でググってほしい</strong></p><ul><li>情報求む</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="楽しい多解像度多アスペクトノッチ対応">楽しい多解像度、多アスペクト、ノッチ対応<a href="#楽しい多解像度多アスペクトノッチ対応" class="hash-link" aria-label="Direct link to 楽しい多解像度、多アスペクト、ノッチ対応" title="Direct link to 楽しい多解像度、多アスペクト、ノッチ対応">​</a></h3><p>一昔前は、世界がほとんど16:9のアスペクト比に統一されたかに見えました、幸せな時代でした…iPadも背景を一色置いて中身が16:9のままでも審査が通ったりしました。</p><p>最近は各社工夫を凝らしたノッチや、<strong>面白いアスペクト比の縦長端末</strong> があります。iPad対応も割とちゃんと必要です。メチャクチャつらい…
最新のUnityであればDeviceSimulatorなどで見た目を確認できますが、Unityバージョンによってはノッチ対応用ライブラリや、アスペクト対応ライブラリを使って（あるいは作って）いきましょう。</p><p>Unity DeviceSimulator(2019.3~)
<a href="https://docs.unity3d.com/Packages/com.unity.device-simulator@latest/" target="_blank" rel="noopener noreferrer">https://docs.unity3d.com/Packages/com.unity.device-simulator@latest/</a></p><p>デザイナーさんが親切であればアスペクト比やノッチの時はどういうレイアウトを想定しているか、の資料があるのでアスペクト比を切り替えたときの見た目を合わせれば大丈夫です。
そうでない場合は、頑張って良い感じに見えるようにしましょう。</p><p>アウトゲームは良い感じにシミュレーションして確認できますが、インゲームの面白さや有利不利がアスペクト比によって変わるようだと、一気に考えることが増えてきます。<br>
<!-- -->この文書ではインゲームについては触れませんが、メチャクチャ難しい要素があるので大変そうです。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="多言語対応をしよう">多言語対応をしよう<a href="#多言語対応をしよう" class="hash-link" aria-label="Direct link to 多言語対応をしよう" title="Direct link to 多言語対応をしよう">​</a></h3><p>Unity標準でlocalizationライブラリがUPM経由で提供されようとしています。
Google SpreadSheetからのインポートも出来そうなので、今後はこれを使うプロジェクトも出てくるかも知れません。
<a href="https://docs.unity3d.com/Packages/com.unity.localization@latest/" target="_blank" rel="noopener noreferrer">https://docs.unity3d.com/Packages/com.unity.localization@latest/</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="uiライブラリの変遷">UIライブラリの変遷<a href="#uiライブラリの変遷" class="hash-link" aria-label="Direct link to UIライブラリの変遷" title="Direct link to UIライブラリの変遷">​</a></h3><p>UnityはメジャーなUIライブラリが数年単位で切り替わってきています。なので参加したプロジェクトで何のUIライブラリを使っているかを確認して、同じライブラリを使いましょう。<strong>UIライブラリの混在はダメ絶対！！！</strong></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ngui期">NGUI期<a href="#ngui期" class="hash-link" aria-label="Direct link to NGUI期" title="Direct link to NGUI期">​</a></h4><p>Unity4.x系から続いているプロジェクトとかは大体これ。Unity標準のUIシステムが不評で、サードパーティー製アセットのNGUIが事実上標準でした。この作者は一体幾ら売り上げたんでしょうね…
さすがに今から新規で開発するプロジェクトではあまり採用されないかもしれませんが、CPU負荷が軽かったりして今も愛用している人やチームが居ます。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ugui期">uGUI期<a href="#ugui期" class="hash-link" aria-label="Direct link to uGUI期" title="Direct link to uGUI期">​</a></h4><p>Unity4.6以降で標準UIとして提供されたuGUIです。おそらく、この文書を読んでいる皆さんのほとんどはuGUIを使っているのでは無いでしょうか。
ボタンのロングタップやダブルタップを受け付けるためのInputModule拡張をする場合もありますが、基本的にuGUIは技術書も日本語で出ているので、キャッチアップしやすいと思います。
プレハブコンフリクトを避けるために各パーツは小分けにしてResources.LoadしたりGameObject.Instantiate()して親子関係をスクリプトで付ける。みたいなコードがあちこちに散らばっていたらこれです。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="後期ugui期">後期uGUI期<a href="#後期ugui期" class="hash-link" aria-label="Direct link to 後期uGUI期" title="Direct link to 後期uGUI期">​</a></h4><p>Unity2018.3以降はNestedPrefabという仕組みが出来ました。後期uGUIはuGUI期+NestedPrefabです。
uGUIを使ったアウトゲームGUIでも、NestedPrefabを<strong>正しく</strong>採用することでスクリプトの記述量を減らしつつ、プレハブコンフリクトも減らせたりします。</p><p>開発しているUnityバージョンにもよりますが、今から新規開発をするなら後期uGUIを採用していることが多い予感です。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ui-toolkit旧名称ui-elements期">UI Toolkit(旧名称:UI Elements)期<a href="#ui-toolkit旧名称ui-elements期" class="hash-link" aria-label="Direct link to UI Toolkit(旧名称:UI Elements)期" title="Direct link to UI Toolkit(旧名称:UI Elements)期">​</a></h4><p>期待の新GUIシステムです。僕の周りではまだあまり採用例が無いのですが、1年後のリリースを見据えてるプロジェクトなどでは、使われているかも知れません。
特徴としてはEditorGUIも同じ書き方が出来ること、jQueryみたいなセレクタとcssみたいな修飾が出来ることです。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="非同期通信がある場合のui考え事">非同期通信がある場合のUI考え事<a href="#非同期通信がある場合のui考え事" class="hash-link" aria-label="Direct link to 非同期通信がある場合のUI考え事" title="Direct link to 非同期通信がある場合のUI考え事">​</a></h2><p><strong>一言で言うとどんなもの？</strong></p><p>スタンドアロンゲームと異なり、サーバ通信の結果が返ってくる時間は保証できません。
なので通信結果が連続でまとめて返ってくる場合や、10秒以上返ってこない場合に、ゲームが壊れないようにUI側で配慮する必要があります。</p><p><strong>これの理解や実装が不完全だと何が起きるの？</strong></p><ul><li>ダイアログが多重になる時に死ぬ</li><li>画面遷移後に前の画面の通信結果が返ってきて死ぬ</li><li>バトル中に前の画面の通信結果が返ってきて死ぬ</li></ul><p><strong>詳しく知りたい人は、この辺の単語でググってほしい</strong></p><ul><li>情報求む</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ダイアログシステム">ダイアログシステム<a href="#ダイアログシステム" class="hash-link" aria-label="Direct link to ダイアログシステム" title="Direct link to ダイアログシステム">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="誤タップ防止とuiアニメーション">誤タップ防止とUIアニメーション<a href="#誤タップ防止とuiアニメーション" class="hash-link" aria-label="Direct link to 誤タップ防止とUIアニメーション" title="Direct link to 誤タップ防止とUIアニメーション">​</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="環境分けを作ろう">環境分けを作ろう<a href="#環境分けを作ろう" class="hash-link" aria-label="Direct link to 環境分けを作ろう" title="Direct link to 環境分けを作ろう">​</a></h2><p>デバッグログを確認したり、SRDebuggerなどを使える開発者モードと、ストアに公開するモード、というクライアントアプリ挙動を示すパラメータを内部で持っておきます。</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#if DEBUG</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>みたいなifdefを切っておく、あるいはasmdef単位で切り分けておいて、<strong>ストア公開するバージョンではデバッグ機能がコンパイルされないようにしておきましょう。</strong></p><p>また、通信相手のAPIサーバも開発環境APIサーバ、ステージング環境APIサーバ、製品環境APIサーバ、と3個くらい(あるいはそれ以上)のサーバURLがあったりするので、環境変数的な仕組みを用意しておいて切り替えられるようにしておきましょう。</p><p>つまり、クライアントの動作にはこれだけのバリエーションが考えられます。</p><table><thead><tr><th>　</th><th>クライアントデバッグビルド</th><th>クライアントリリースビルド</th></tr></thead><tbody><tr><td>APIサーバ(DEV)</td><td>よく使う</td><td>アクセス出来ないのが正しい</td></tr><tr><td>APIサーバ(STG)</td><td>めっちゃよく使う</td><td>QA時、ストア審査時だけ使う</td></tr><tr><td>APIサーバ(PROD)</td><td>互換性チェックに使う</td><td><strong>ユーザが遊ぶのはここ</strong></td></tr></tbody></table><p>tips:このDEV, STG, PRODという環境の分け方はよく使われていますが、現場によって名付けルールが大きく異なることがあるので注意が必要です。例えば開発環境のDEVでもdevelop1, develop2...というような名付けの場合や、機能や施策ごとに開発環境を切り分けている現場ではfeature1, feature2...というような名付けがされていることがあります。<br>
<!-- -->特に新しい現場やチームでは確認をした方が良いでしょう。  </p><p>またステージング環境でも現場によっては意図が異なり、STGはQA(quality assurance)用環境のことを指す場合もあれば、PRODと同じバージョンがデプロイされているCS対応用環境の場合などもあります。<br>
<!-- -->また、後述するApp Storeの審査の関係上ステージング環境という分類でありながら、次回リリース用のAPIサーバがデプロイされており、審査スタッフが問題なく審査を行うため、開発やQAのメンバーが触らない特別な環境が用意されていることがあります。この環境の呼び方もまた様々ですが、Review環境やJudge環境と呼ばれたりします。(　審査提出バイナリの罠と対策 を確認してください)  </p><p>tips:更に、クライアントエンジニアの手元PCでAPIサーバのシミュレーションが出来るように整備されている事もあります。チームに参加したら「Dockerを使ったローカルAPIサーバもありますか？」と聞いてみましょう。これがあるとSTG相当のサーバ動作チェックを手元で行ったり、開発中にバグったと思ったときにサーバ側にログを仕込んでクライアント、サーバどちらに問題が起きているか切り分けたり、ということが出来ます。便利です！（その代わり、PHPとかDockerとかを覚える必要が出てきます。頑張って覚えましょう！）</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="devstgprod">DEV,STG,PROD<a href="#devstgprod" class="hash-link" aria-label="Direct link to DEV,STG,PROD" title="Direct link to DEV,STG,PROD">​</a></h3><p>ソーシャルゲームが初めてで、この3単語を初めて目にした方も居るかも知れません。</p><ul><li>DEV…開発環境、バグがあるかもしれないし、壊れているかも知れない。最新のコードが含まれています。</li><li>STG…ステージング環境、次にリリースするバージョンが動いています。ここでテストやQAをして、問題なければPRODにリリースされます。</li><li>PROD…製品環境、ユーザが実際に遊んでいる環境です。ここでうっかり変な操作やバグを仕込むとメチャクチャ怒られるのでSTGでいっぱいチェックしましょう。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inhousebuildとdeploygate">InHouseBuildとDeploygate<a href="#inhousebuildとdeploygate" class="hash-link" aria-label="Direct link to InHouseBuildとDeploygate" title="Direct link to InHouseBuildとDeploygate">​</a></h3><p>QAの人や社内テスターの人に遊んで貰うために、専用のアプリ配布システムを社内に用意しておきましょう。もし社内に整備されていなければ、あなたが整備しましょう。
精神の衛生に大幅に好影響があります。チームのCI環境も、もし存在しなければあなたが用意しましょう。きっと感謝されます。</p><p>一方で所属したチームが既に環境整備済みだった場合はチームの人に<strong>「このCI環境や配布環境って誰が作ってくれたんですか？」と尋ねて、担当者の方に感謝を伝えて</strong>おきましょう。本当にありがたいです。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="審査提出バイナリの罠と対策">審査提出バイナリの罠と対策<a href="#審査提出バイナリの罠と対策" class="hash-link" aria-label="Direct link to 審査提出バイナリの罠と対策" title="Direct link to 審査提出バイナリの罠と対策">​</a></h3><p>特にApp Storeでよく問題になるのですが、<strong>審査通過後にバイナリを差し替えることは出来ません。</strong>つまりストア公開前の審査段階のバイナリと審査通過後の公開可能なバイナリは同一です。
<strong>同一のバイナリで、接続先を切り替えられる仕組みを用意しておきましょう。</strong>
典型的な実装としては、クライアント起動時にまずサーバに自らのバイナリバージョンを送信してどのサーバに接続すれば良いか問合せ、サーバがそのバイナリバージョンに応じた接続先を返すという物です。
このような仕組みを用意しておくと、バイナリの接続先をApp Storeの審査中はステージング環境、審査通過後は本番環境へと切り替えることが出来ます。
この仕組みを用意していないと、新機能実装など大規模アップデート時の審査に、<strong>本番環境ではバイナリが起動しないという状況でApp Storeのバイナリが本番環境に接続してしまうとアプリがクラッシュし、100%審査に落ちてしまいます。</strong> </p><p>（そうなってしまった場合は、苦肉の策としてゲームをアプリ審査している2週間くらい長期メンテにして、その間に本番環境を大規模アップデート版にアップデート、ユーザは2週間遊べないまま無視して、AppStore審査を<strong>無人の本番環境で遊んで貰う</strong>となります。2週間のメンテ…考えるだけで胃が痛くなりますね…）</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="メジャーなライブラリを知ろう">メジャーなライブラリを知ろう<a href="#メジャーなライブラリを知ろう" class="hash-link" aria-label="Direct link to メジャーなライブラリを知ろう" title="Direct link to メジャーなライブラリを知ろう">​</a></h2><p>Unityのソーシャルゲーム開発、というよりUnityの大規模開発系だと以下のライブラリはよく使われます。それぞれUnityが苦手とする部分をカバーするライブラリなので、どういった用途で使っているかを確認して、似た用途なら積極的に使っていきましょう。</p><p>以下の3ライブラリを使わずにゲームを開発することは可能ですが、既にプロジェクトで採用されているなら積極的に覚えておきましょう。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unirx">UniRx<a href="#unirx" class="hash-link" aria-label="Direct link to UniRx" title="Direct link to UniRx">​</a></h3><ul><li>Unityが.Net3.5系の頃からあるライブラリ</li><li>非同期通信、イベントストリーム購読用途</li><li>非同期通信については後述のasync,await+UniTaskを使うことが多いかも</li><li>何も考えずに使うとゾンビストリームがメッチャ出るので勉強しましょう</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="zenject">Zenject<a href="#zenject" class="hash-link" aria-label="Direct link to Zenject" title="Direct link to Zenject">​</a></h3><ul><li>DIフレームワーク for Unity的なもの</li><li>DIフレームワークと言いつつSignalBusやTickableも持っていたりする</li><li>どこまでZenjectを使う方針か確認しましょう</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unitask">UniTask<a href="#unitask" class="hash-link" aria-label="Direct link to UniTask" title="Direct link to UniTask">​</a></h3><ul><li>Unity C#がC#7.x以降の構文を扱えるようになった結果、非同期処理にasyncとawaitが使えるようになった</li><li>凄いコルーチン、みたいな感じの使い勝手(Task)</li><li>その凄いコルーチンは、オーバーヘッドが大きいし、Unity組み込み関数との繋ぎ込みが弱い</li><li>なのでasync awaitと組み合わせるUnity特化のTaskライブラリがUniTask</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="メジャーなミドルウェアツールを知ろう">メジャーなミドルウェア・ツールを知ろう<a href="#メジャーなミドルウェアツールを知ろう" class="hash-link" aria-label="Direct link to メジャーなミドルウェア・ツールを知ろう" title="Direct link to メジャーなミドルウェア・ツールを知ろう">​</a></h2><p>Unityを使った大規模開発系では、以下のツール・ミドルウェアがよく併用されます。ライブラリ同様、Unityが苦手とする部分を補佐する製品群です。
以下に挙げたものは、いずれもUnityとは独立したツールでデータオーサリングを行い、Unity側ではSDKを通じて各種アセットを再生するものです。</p><p>開発規模が大きく作業者が多かったり複数社にまたがっている場合は、いちいちUnityのプロジェクトを全部共有して全員がUnityのライセンスを持って作業することが大変です。
自作ツールやExcelで頑張る道もなくはないですが、物量が多い2Dデータ、音声データ等の管理はいつか破綻します。こうしたツールを上手に使ってアセットパイプラインを構築することが重要になります。
有料ですが、ゲームで達成しなくてはならない機能とデータ量の見積もり、自作した場合の人月などを加味しつつ使うか判定すると良いでしょう。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="live-2d">Live 2D<a href="#live-2d" class="hash-link" aria-label="Direct link to Live 2D" title="Direct link to Live 2D">​</a></h3><ul><li>2Dキャラクターを立体的にアニメーションできる技術</li><li>キャラ絵をパーツごとに分割して再構成する</li><li>キャラクターをイキイキさせたいという要望が上から来たら必須</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="optpix-spritestudio">OPTPiX SpriteStudio<a href="#optpix-spritestudio" class="hash-link" aria-label="Direct link to OPTPiX SpriteStudio" title="Direct link to OPTPiX SpriteStudio">​</a></h3><ul><li>汎用の2Dアニメーション作成ツール</li><li>ボーンアニメーション、エフェクト制作など</li><li>タイムライン機能を使ってワイプ・カットインの演出としても使える</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cri-adx2">CRI ADX2<a href="#cri-adx2" class="hash-link" aria-label="Direct link to CRI ADX2" title="Direct link to CRI ADX2">​</a></h3><ul><li>サウンドライブラリ＋サウンドオーサリングツール</li><li>Android端末での音の遅延対策が強く、音ゲーでは多く使われている</li><li>曲やボイスデータが多いゲームでは、大量データをハンドリングするツールとして利用される</li><li>サウンドファイルが特殊形式なので、IPモノ等におけるデータ保護の意味で使う場合もある</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="photon">Photon<a href="#photon" class="hash-link" aria-label="Direct link to Photon" title="Direct link to Photon">​</a></h3><ul><li>ネットワークマルチプレイミドルウェア</li><li>リアルタイムバトルがあるゲーム</li><li>バックエンド付きのCloud、自分で鯖立てするServerがある</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mbaas">mBaaS<a href="#mbaas" class="hash-link" aria-label="Direct link to mBaaS" title="Direct link to mBaaS">​</a></h3><ul><li>これは製品名ではなく製品カテゴリの名前</li><li>ログイン、ユーザーデータ保存、ログボ、ギルド等のサーバー側機能をまとめたサービス</li><li>自社でバックエンドを組まない小規模タイトルや、プロトタイプ時のドライバ・スタブとしても活用価値あり</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/neon-izm/before_join_socialgame/edit/master/website/docs/doc3.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/before_join_socialgame/docs/doc2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">1章:サーバサイドと仲良くなろう</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/before_join_socialgame/docs/doc4"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">3章:運用を見据えて作っておこう</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#チュートリアルを作ろう" class="table-of-contents__link toc-highlight">チュートリアルを作ろう</a></li><li><a href="#インゲームを作ろう" class="table-of-contents__link toc-highlight">インゲームを作ろう</a></li><li><a href="#アウトゲームを作ろう" class="table-of-contents__link toc-highlight">アウトゲームを作ろう</a><ul><li><a href="#楽しい多解像度多アスペクトノッチ対応" class="table-of-contents__link toc-highlight">楽しい多解像度、多アスペクト、ノッチ対応</a></li><li><a href="#多言語対応をしよう" class="table-of-contents__link toc-highlight">多言語対応をしよう</a></li><li><a href="#uiライブラリの変遷" class="table-of-contents__link toc-highlight">UIライブラリの変遷</a></li></ul></li><li><a href="#非同期通信がある場合のui考え事" class="table-of-contents__link toc-highlight">非同期通信がある場合のUI考え事</a><ul><li><a href="#ダイアログシステム" class="table-of-contents__link toc-highlight">ダイアログシステム</a></li><li><a href="#誤タップ防止とuiアニメーション" class="table-of-contents__link toc-highlight">誤タップ防止とUIアニメーション</a></li></ul></li><li><a href="#環境分けを作ろう" class="table-of-contents__link toc-highlight">環境分けを作ろう</a><ul><li><a href="#devstgprod" class="table-of-contents__link toc-highlight">DEV,STG,PROD</a></li><li><a href="#inhousebuildとdeploygate" class="table-of-contents__link toc-highlight">InHouseBuildとDeploygate</a></li><li><a href="#審査提出バイナリの罠と対策" class="table-of-contents__link toc-highlight">審査提出バイナリの罠と対策</a></li></ul></li><li><a href="#メジャーなライブラリを知ろう" class="table-of-contents__link toc-highlight">メジャーなライブラリを知ろう</a><ul><li><a href="#unirx" class="table-of-contents__link toc-highlight">UniRx</a></li><li><a href="#zenject" class="table-of-contents__link toc-highlight">Zenject</a></li><li><a href="#unitask" class="table-of-contents__link toc-highlight">UniTask</a></li></ul></li><li><a href="#メジャーなミドルウェアツールを知ろう" class="table-of-contents__link toc-highlight">メジャーなミドルウェア・ツールを知ろう</a><ul><li><a href="#live-2d" class="table-of-contents__link toc-highlight">Live 2D</a></li><li><a href="#optpix-spritestudio" class="table-of-contents__link toc-highlight">OPTPiX SpriteStudio</a></li><li><a href="#cri-adx2" class="table-of-contents__link toc-highlight">CRI ADX2</a></li><li><a href="#photon" class="table-of-contents__link toc-highlight">Photon</a></li><li><a href="#mbaas" class="table-of-contents__link toc-highlight">mBaaS</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/before_join_socialgame/docs/">本編</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/neon-izm/before_join_socialgame" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github Repo <svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/izm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Auther twitter: @izm<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Before Join Socialgame Client. Built with Docusaurus.</div></div></div></footer></div>
<script src="/before_join_socialgame/assets/js/runtime~main.99a3b35b.js"></script>
<script src="/before_join_socialgame/assets/js/main.ed5ee3c9.js"></script>
</body>
</html>